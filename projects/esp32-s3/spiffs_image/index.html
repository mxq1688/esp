<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32-S3 RGB LED 控制器</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#2196F3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="RGB LED 控制器">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🌈 ESP32-S3 RGB LED 控制器</h1>
            <div class="connection-status" id="connectionStatus">
                <span class="status-indicator"></span>
                <span class="status-text">连接中...</span>
            </div>
        </header>

        <main>
            <!-- 当前颜色预览 -->
            <div class="color-preview-section">
                <div class="color-preview" id="colorPreview"></div>
                <p class="preview-label">当前颜色预览</p>
            </div>

            <!-- 颜色选择器 -->
            <div class="control-section">
                <h2>🎨 颜色选择</h2>
                <div class="color-picker-container">
                    <input type="color" id="colorPicker" class="color-picker" value="#ffffff">
                    <label for="colorPicker" class="color-picker-label">选择颜色</label>
                </div>
            </div>

            <!-- RGB 滑块控制 -->
            <div class="control-section">
                <h2>🔧 RGB 精确控制</h2>
                <div class="rgb-controls">
                    <div class="slider-container">
                        <label for="redSlider">红色 (R): <span id="redValue">255</span></label>
                        <input type="range" id="redSlider" min="0" max="255" value="255" class="slider red-slider">
                    </div>
                    <div class="slider-container">
                        <label for="greenSlider">绿色 (G): <span id="greenValue">255</span></label>
                        <input type="range" id="greenSlider" min="0" max="255" value="255" class="slider green-slider">
                    </div>
                    <div class="slider-container">
                        <label for="blueSlider">蓝色 (B): <span id="blueValue">255</span></label>
                        <input type="range" id="blueSlider" min="0" max="255" value="255" class="slider blue-slider">
                    </div>
                </div>
            </div>

            <!-- 亮度控制 -->
            <div class="control-section">
                <h2>💡 亮度控制</h2>
                <div class="brightness-container">
                    <label for="brightnessSlider">亮度: <span id="brightnessValue">50</span>%</label>
                    <input type="range" id="brightnessSlider" min="0" max="100" value="50" class="slider brightness-slider">
                </div>
            </div>

            <!-- 预设颜色 -->
            <div class="control-section">
                <h2>🌟 预设颜色</h2>
                <div class="preset-colors">
                    <button class="preset-btn" data-color="#FF0000" style="background-color: #FF0000;">红色</button>
                    <button class="preset-btn" data-color="#00FF00" style="background-color: #00FF00;">绿色</button>
                    <button class="preset-btn" data-color="#0000FF" style="background-color: #0000FF;">蓝色</button>
                    <button class="preset-btn" data-color="#FFFFFF" style="background-color: #FFFFFF;">白色</button>
                    <button class="preset-btn" data-color="#FFFF00" style="background-color: #FFFF00;">黄色</button>
                    <button class="preset-btn" data-color="#FF00FF" style="background-color: #FF00FF;">紫色</button>
                    <button class="preset-btn" data-color="#00FFFF" style="background-color: #00FFFF;">青色</button>
                    <button class="preset-btn" data-color="#FFA500" style="background-color: #FFA500;">橙色</button>
                </div>
            </div>

            <!-- 特效模式 -->
            <div class="control-section">
                <h2>✨ 特效模式</h2>
                
                <!-- 自动呼吸彩虹效果 -->
                <div class="auto-effect-control">
                    <label class="auto-effect-label">
                        <input type="checkbox" id="autoEffectCheckbox" checked>
                        <span class="checkmark"></span>
                        🌈✨ 自动呼吸彩虹效果
                    </label>
                    <div class="auto-effect-status" id="autoEffectStatus">已启用</div>
                </div>
                
                <div class="effect-buttons">
                    <button class="effect-btn" id="rainbowBtn">🌈 彩虹循环</button>
                    <button class="effect-btn" id="breatheBtn">💨 呼吸灯</button>
                    <button class="effect-btn" id="strobeBtn">⚡ 闪烁</button>
                    <button class="effect-btn" id="stopEffectBtn">⏹️ 停止特效</button>
                </div>
            </div>

            <!-- 快速控制 -->
            <div class="control-section">
                <h2>⚡ 快速控制</h2>
                <div class="quick-controls">
                    <button class="quick-btn" id="turnOffBtn">🔴 关闭</button>
                    <button class="quick-btn" id="turnOnBtn">🟢 开启</button>
                    <button class="quick-btn" id="maxBrightnessBtn">☀️ 最大亮度</button>
                    <button class="quick-btn" id="dimBtn">🌙 夜灯模式</button>
                </div>
            </div>
        </main>

        <!-- 设置面板 -->
        <div class="settings-section">
            <h2>⚙️ 设置</h2>
            <div class="setting-item">
                <label for="espIpInput">ESP32-S3 IP 地址:</label>
                <input type="text" id="espIpInput" placeholder="自动检测" value="">
                <button id="connectBtn">连接</button>
            </div>
            <div class="setting-item">
                <label for="autoUpdateCheckbox">
                    <input type="checkbox" id="autoUpdateCheckbox" checked>
                    自动更新状态
                </label>
            </div>
        </div>

        <!-- 状态信息 -->
        <div class="status-info" id="statusInfo">
            <p>已连接到本地ESP32-S3设备</p>
        </div>
    </div>

    <!-- PWA 安装提示 -->
    <div class="install-prompt" id="installPrompt" style="display: none;">
        <div class="install-content">
            <h3>📱 安装应用</h3>
            <p>将此LED控制器添加到主屏幕，获得原生应用体验！</p>
            <button id="installBtn">安装</button>
            <button id="dismissBtn">稍后</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html> 